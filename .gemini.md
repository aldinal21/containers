# Gemini CLI Context & Project Documentation

File ini berfungsi sebagai memori konteks untuk Gemini CLI dan referensi cepat bagi user (@aldinal21).

## üåç Infrastructure Overview
- **Host:** Ubuntu Server (Macbook Pro 2011)
- **Specs:** 8GB RAM + 15GB Swap File.
- **Network:** Services bind to `0.0.0.0` (All Interfaces).
- **Security:**
  - **UFW:** Enabled (Allow SSH + Tailscale Interface `tailscale0`).
  - **Access:** Localhost or via Tailscale IP.
  - **Resource Management:** Strict RAM limits pada semua container untuk mencegah OOM (Out of Memory).
  - **Logs:** Docker Log Rotation aktif (Max 3 files x 10MB per container).

## üì¶ Services Stack

### 1. PostgreSQL 16 (AI-Ready)
- **Image:** `pgvector/pgvector:pg16`
- **Instances:**
  - **Dev:** Port `5432` (Limit: 1.5GB RAM)
  - **Prod:** Port `5433` (Limit: 1.5GB RAM)
- **Features:** Vector Embeddings enabled (`CREATE EXTENSION vector;` required per DB).
- **Backup:** `make postgres-backup ENV=dev` (Saved to `backups/postgres/`).

### 2. MinIO (S3 Storage)
- **Instances:**
  - **Dev:** API `:9100`, Console `:9101` (Limit: 512MB RAM)
  - **Prod:** API `:9200`, Console `:9201` (Limit: 512MB RAM)

### 3. Redis (Cache/Queue)
- **Instance:** Single Shared Container
- **Port:** `6379`
- **Limit:** 128MB RAM
- **Auth:** No password (Internal use only).
- **Usage:** Gunakan DB 0 untuk Dev, DB 1 untuk Prod.

### 4. Management & Monitoring
- **Portainer:** Port `:9000` / `:9443` (Limit: 256MB RAM).
- **Uptime Kuma:** Port `:3001` (Limit: 256MB RAM).

### 5. Tools
- **Syncthing:** File Sync lintas device (Android/Windows).
  - Web UI: `:8384`
  - Sync Port: `:22000` (TCP/UDP)
  - Limit: 256MB RAM.

## üõ†Ô∏è Common Operations (Makefile)

```bash
# Start All Services (Dev + Redis + Monitoring)
make all-up monitoring-up

# Start Production DB (Manual Start)
make postgres-prod-up

# Backup Database
make postgres-backup ENV=dev
make postgres-backup ENV=prod

# Check Status
docker ps
make help
```

## üìù Important Notes for Future
1.  **Swap Memory:** Pastikan Swap selalu aktif (`free -h`) karena RAM fisik terbatas (8GB).
2.  **Tailscale:** Akses remote (luar rumah) wajib via Tailscale IP agar aman.
3.  **Passwords:** Cek `.env` file di folder masing-masing service jika lupa.
    - Default Redis: No password.
    - Default Postgres/MinIO: `admin` / `minioadmin` (Ubah di `.env.prod` untuk data sensitif!).
4.  **Log Rotation:** Sudah dikonfigurasi di `docker-compose` agar disk tidak penuh oleh log.

---
*Last Updated: 2026-02-03*
